On M3 pro with running it 10 times for each configuration:

metal:
{'encode': [53.57, 44.88, 37.76, 36.71, 37.04, 37.43, 37.66, 37.25, 37.48, 37.82], 'decode': [1.38, 1.51, 1.37, 1.36, 1.37, 1.36, 1.47, 1.41, 1.4, 1.39], 'load coreml': [], 'total': [238.77, 207.33, 200.46, 198.3, 197.81, 200.75, 202.29, 203.33, 202.18, 208.32]}
encode time: first run: 53.57, avg: 38.23, std: 2.38
decode time: first run: 1.38, avg: 1.40, std: 0.05
total time: first run: 238.77, avg: 202.31, std: 3.41

30min podcast:
whisper_print_timings:     load time =    87.91 ms
whisper_print_timings:     fallbacks =   0 p /   1 h
whisper_print_timings:      mel time =   805.62 ms
whisper_print_timings:   sample time =  6920.74 ms / 36283 runs (    0.19 ms per run)
whisper_print_timings:   encode time =  1322.75 ms /    85 runs (   15.56 ms per run)
whisper_print_timings:   decode time =   113.41 ms /    74 runs (    1.53 ms per run)
whisper_print_timings:   batchd time = 18378.07 ms / 35787 runs (    0.51 ms per run)
whisper_print_timings:   prompt time =   617.93 ms / 18955 runs (    0.03 ms per run)
whisper_print_timings:    total time = 28343.08 ms


coreml ANE:
{'encode': [37.1, 36.76, 35.43, 36.54, 30.61, 36.31, 30.44, 39.92, 29.68, 35.28], 'decode': [1.42, 1.38, 1.41, 1.29, 1.91, 1.45, 1.36, 1.4, 1.96, 1.64], 'load coreml': [49.55, 49.61, 42.6, 42.4, 43.55, 46.52, 45.48, 44.31, 44.6, 47.12], 'total': [295.77, 273.25, 252.53, 242.74, 253.3, 258.01, 253.31, 262.64, 256.95, 256.25]}
encode time: first run: 37.10, avg: 34.55, std: 3.30
decode time: first run: 1.42, avg: 1.53, std: 0.23
load coreml time: first run: 49.55, avg: 45.13, std: 2.20
total time: first run: 295.77, avg: 256.55, std: 7.79

whisper_print_timings:     load time =    86.08 ms
whisper_print_timings:     fallbacks =   0 p /   0 h
whisper_print_timings:      mel time =   804.08 ms
whisper_print_timings:   sample time =  7135.70 ms / 37534 runs (    0.19 ms per run)
whisper_print_timings:   encode time =  1642.61 ms /    83 runs (   19.79 ms per run)
whisper_print_timings:   decode time =   169.39 ms /   108 runs (    1.57 ms per run)
whisper_print_timings:   batchd time = 19693.60 ms / 37014 runs (    0.53 ms per run)
whisper_print_timings:   prompt time =   616.25 ms / 18501 runs (    0.03 ms per run)
whisper_print_timings:    total time = 30262.49 ms

coreml GPU:
{'encode': [59.51, 48.05, 43.72, 43.66, 44.29, 45.9, 45.0, 44.76, 45.58, 46.32], 'decode': [1.48, 1.58, 1.43, 1.43, 2.04, 1.44, 2.0, 1.98, 1.49, 1.45], 'load coreml': [52.15, 25.42, 25.41, 25.95, 25.8, 26.62, 25.65, 25.56, 25.79, 25.63], 'total': [293.35, 231.47, 241.59, 243.93, 245.7, 239.94, 249.41, 240.53, 240.84, 245.26]}
encode time: first run: 59.51, avg: 45.25, std: 1.32
decode time: first run: 1.48, avg: 1.65, std: 0.26
load coreml time: first run: 52.15, avg: 25.76, std: 0.35
total time: first run: 293.35, avg: 242.07, std: 4.73

whisper_print_timings:     load time =    93.39 ms
whisper_print_timings:     fallbacks =   0 p /   1 h
whisper_print_timings:      mel time =   808.69 ms
whisper_print_timings:   sample time =  6917.58 ms / 36283 runs (    0.19 ms per run)
whisper_print_timings:   encode time =  1317.79 ms /    85 runs (   15.50 ms per run)
whisper_print_timings:   decode time =   113.66 ms /    74 runs (    1.54 ms per run)
whisper_print_timings:   batchd time = 18486.69 ms / 35787 runs (    0.52 ms per run)
whisper_print_timings:   prompt time =   616.47 ms / 18955 runs (    0.03 ms per run)
whisper_print_timings:    total time = 28452.74 ms

TODP:
 what's batchd time?

Power:

metal:
1ms sampling rate
{'CPU': 153.96, 'GPU': 157.64, 'ANE': 0.0}
10ms 
{'CPU': 127.27, 'GPU': 153.83, 'ANE': 0.0}
100 ms
{'CPU': 112.12, 'GPU': 145.45, 'ANE': 0.0}
1000ms
{'CPU': 117.54, 'GPU': 149.29, 'ANE': 0.0}


 coreml:
1ms
{'CPU': 158.01, 'GPU': 91.51, 'ANE': 5.31}
10ms
{'CPU': 128.28, 'GPU': 97.49, 'ANE': 5.37}
100ms
{'CPU': 110.04, 'GPU': 85.32, 'ANE': 5.44}
1000ms
{'CPU': 106.48, 'GPU': 82.38, 'ANE': 5.28}




ane optimized model, librispeech

whisper_print_timings:     load time =    75.82 ms
whisper_print_timings:     fallbacks =   0 p /   0 h
whisper_print_timings:      mel time =   678.18 ms
whisper_print_timings:   sample time =  6705.76 ms / 34428 runs (    0.19 ms per run)
whisper_print_timings:   encode time =  1202.35 ms /    83 runs (   14.49 ms per run)
whisper_print_timings:   decode time =   437.96 ms /   289 runs (    1.52 ms per run)
whisper_print_timings:   batchd time = 18773.79 ms / 33727 runs (    0.56 ms per run)
whisper_print_timings:   prompt time =   624.52 ms / 18606 runs (    0.03 ms per run)
whisper_print_timings:    total time = 28603.50 ms
ggml_metal_free: deallocating

tiny, vanila
whisper_print_timings:     load time =    81.96 ms
whisper_print_timings:     fallbacks =   0 p /   0 h
whisper_print_timings:      mel time =   675.12 ms
whisper_print_timings:   sample time =  6648.48 ms / 34398 runs (    0.19 ms per run)
whisper_print_timings:   encode time =  1544.40 ms /    78 runs (   19.80 ms per run)
whisper_print_timings:   decode time =   515.70 ms /   338 runs (    1.53 ms per run)
whisper_print_timings:   batchd time = 18790.50 ms / 33673 runs (    0.56 ms per run)
whisper_print_timings:   prompt time =   597.11 ms / 17466 runs (    0.03 ms per run)
whisper_print_timings:    total time = 29782.68 ms
ggml_metal_free: deallocating
ggml_metal_free: deallocating

small, vanila
whisper_print_timings:     load time =   178.84 ms
whisper_print_timings:     fallbacks =   0 p /   0 h
whisper_print_timings:      mel time =   676.68 ms
whisper_print_timings:   sample time =  7431.15 ms / 37270 runs (    0.20 ms per run)
whisper_print_timings:   encode time =  9291.69 ms /    67 runs (  138.68 ms per run)
whisper_print_timings:   decode time =   328.96 ms /    56 runs (    5.87 ms per run)
whisper_print_timings:   batchd time = 67911.59 ms / 36882 runs (    1.84 ms per run)
whisper_print_timings:   prompt time =  2327.90 ms / 14942 runs (    0.16 ms per run)
whisper_print_timings:    total time = 92422.41 ms
ggml_metal_free: deallocating


small ane:
whisper_print_timings:     load time =   187.74 ms
whisper_print_timings:     fallbacks =   0 p /   0 h
whisper_print_timings:      mel time =   673.28 ms
whisper_print_timings:   sample time =  7126.61 ms / 37215 runs (    0.19 ms per run)
whisper_print_timings:   encode time =  6497.44 ms /    67 runs (   96.98 ms per run)
whisper_print_timings:   decode time =   646.35 ms /   109 runs (    5.93 ms per run)
whisper_print_timings:   batchd time = 68333.89 ms / 36777 runs (    1.86 ms per run)
whisper_print_timings:   prompt time =  2363.84 ms / 14714 runs (    0.16 ms per run)
whisper_print_timings:    total time = 91419.48 ms

metal
Ran model=tiny threads=2 processor_count=1, took 244.41ms
Ran model=tiny threads=2 processor_count=2, took 218.81ms
Ran model=tiny threads=4 processor_count=1, took 209.13ms
Ran model=tiny threads=4 processor_count=2, took 214.33ms
Ran model=tiny threads=8 processor_count=1, took 193.91ms
Ran model=tiny threads=8 processor_count=2, took 216.95ms
Ran model=base threads=2 processor_count=1, took 307.1ms
Ran model=base threads=2 processor_count=2, took 337.52ms
Ran model=base threads=4 processor_count=1, took 306.41ms
Ran model=base threads=4 processor_count=2, took 330.76ms
Ran model=base threads=8 processor_count=1, took 289.83ms
Ran model=base threads=8 processor_count=2, took 330.94ms
Ran model=small threads=2 processor_count=1, took 678.43ms
Ran model=small threads=2 processor_count=2, took 872.47ms
Ran model=small threads=4 processor_count=1, took 655.0ms
Ran model=small threads=4 processor_count=2, took 861.04ms
Ran model=small threads=8 processor_count=1, took 642.49ms
Ran model=small threads=8 processor_count=2, took 860.35ms

ANE 
Ran model=tiny threads=2 processor_count=1, took 304.46ms
Ran model=tiny threads=2 processor_count=2, took 281.46ms
Ran model=tiny threads=4 processor_count=1, took 264.08ms
Ran model=tiny threads=4 processor_count=2, took 277.05ms
Ran model=tiny threads=8 processor_count=1, took 259.3ms
Ran model=tiny threads=8 processor_count=2, took 262.2ms
Ran model=base threads=2 processor_count=1, took 356.03ms
Ran model=base threads=2 processor_count=2, took 376.57ms
Ran model=base threads=4 processor_count=1, took 333.29ms
Ran model=base threads=4 processor_count=2, took 361.36ms
Ran model=base threads=8 processor_count=1, took 330.84ms
Ran model=base threads=8 processor_count=2, took 360.94ms
Ran model=small threads=2 processor_count=1, took 707.84ms
Ran model=small threads=2 processor_count=2, took 827.47ms
Ran model=small threads=4 processor_count=1, took 712.63ms
Ran model=small threads=4 processor_count=2, took 799.38ms
Ran model=small threads=8 processor_count=1, took 677.99ms
Ran model=small threads=8 processor_count=2, took 807.16ms